## Shell

Unix - UNiplexed Information and Computing System

Терминал - программа, которая запускает командную оболочку внутри себя.<br>
Речь пойдёт про оболочку `shell`<br>

### Работа с терминалом

#### О работе с командами
У программ бывают принимаемые опции и аргументы. Опции начинаются с `-` или `--`<br>
Аргументы и опции отделяются от команды символом пробела и между собой разделяются пробелами.<br>
Хорошим тоном считается писать опиции перед аргументами.<br>
Если значение содержит пробелы, то это значение нужно обернуть в двойные `"` или одинарные кавычки `'`<br>
Ещё пробел можно экранировать символом `\`<br>
Большинство опций имеют два названия (короткое для консоли и длинное для скриптов). Например `-v` и `--version`<br>
`ls -a -l` равносильно `ls -al`<br>
`;` -- Разделитель команд, соответствует переносу строки.<br>
`&&` и `||` -- имеют такой же смысл как в языке `C`, только истиной является код завершения `0`<br>
`|` -- Pipeline. Конвейер для подачи вывода программы слева на вход программе справа.<br>
Например `cat <source> | grep Dog | uniq | sort`<br>
Вывод команды можно использовать фрагментом другой команды, если обернуть её в обратные кавычки ``` ` ```<br>
`$?` -- код возврата предыдущей выполненной команды.<br>
`!!` -- выполнить предыдущую команду.<br>

История команд хранится в обычном файле `.bash_history`<br>
Стрелками `up/down` можно перемещаться по недавним командам.<br>

#### Чтение документации
Открыть режим чтения документации можно командой `man [раздел] <имя команды>`<br>
Документация разбита на несколько разделов:

* `1` -- команды оболочки
* `1p` -- команды оболочки, функциональность которых соответствует стандарту POSIX
* `2` -- системные вызовы ядра операционной системы
* `3` -- функции стандартной библиотеки языка `C`
* `3p` -- Си-функции POSIX API
* `4` -- описания модулей ядра и системных устройств
* `5` -- описания форматов конфигурационных файлов
* `6` -- описания программ для X11
* `7` -- различные руководства, не попадающие под какую-либо классификацию
* `8` -- руководства по администрированию
* `n` -- руководства Tcl.

Документация открывается в пейджере `less`, вот основы работы с ним:

* `q` -- выход
* `h` -- help
* `f` -- вперёд
* `b` -- назад
* `/<строка>` + Enter -- поиск строки
  * переход по совпадениям с помощью `n` и `N`

Необязательные опции в документации обозначаются в квадратных скобках `[]`<br>
`|` в документации это исключающее или. Например `a|b` означает, что можно написать либо только `a`, либо только `b`<br>

#### Принятые обозначения клавиатурных сочетаний
* `C-Буква` -- одновременное нажатие `Ctrl` и буквенной клавиши
* `M-Буква` -- одновременное нажатие `Alt` и буквенной клавиши
* `C-Буква1 Буква2` -- сначала одновременное нажатие `Ctrl` и `Буква1`, затем отпустить `Ctrl` и нажать `Буква2`
* `C-Буква1 C-Буква2` -- нажать `Ctrl`, затем нажать и отпустить `Буква1`, не отпуская `Ctrl`  нажать и отпустить `Буква2`

#### Полезные клавиатурные сочетания

* `C-d` -- сигнал завершения ввода
* `C-c` -- сигнал завершения процесса
* `C-s` -- приостановить процесс
* `C-q` -- продолжить выполнение процесса
* `C-l` -- аналог команды `clear`
* `C-a` -- поместить курсор в начало строки
* `C-e` -- поместить курсор в конец строки
* `C-u` -- удалить всё от начала строки до курсора
* `C-k` -- удалить всё от курсора до конца строки
* `C-w` -- удалить одно слово
* `C-y` -- вставить удалённый текст
* `C-p` -- показать предшествующую в истории команду
* `C-n` -- показать следующую в истории команду
* `C-r` -- рекурсивный поиск по истории

#### Файловая система
Все файлы и каталоги находятся внутри корневого каталога `/`<br>
Текущий каталог обозначается как `.`<br>
Каталог на уровень выше как `..`<br>
Можно сказать, что всё есть файл. Регистр важен. Понятие "расширение файла" отсутствует, но для удобства использования существуют суффиксы имени.<br>
Например, файловому архиву в формате `tar`, сжатому компрессором `lzma`, часто дают суффикс `.tar.lzma`<br>
Скрытый файл обозначается точкой перед именем `.mySecrets`<br>
Переименование файла равносильно перемещению.<br>

Пути бывают абсолютные и относительные.<br>
Абсолютный путь начинается с `/`<br>
Символ `~` обозначает домашний каталог пользователя (путь до него подставляется автоматически).<br>
Полное имя может быть как абсолютным (начинается с символа `/`), так и относительным (начинается с символа `.`).<br>
Программы, которые находятся в домашнем каталоге, обычно запускают вводом их полного имени.
Все стандартные программы запускаются по вводу имени их исполняемого файла, так как этот файл располагается в одном из каталогов, перечисленных в переменной окружения PATH.<br>

При нажатии клавиши `Tab` набираемый путь любезно автодополняется.<br>

#### Файловые дескрипторы
Каждый из потоков по факту тоже является файлом. Вот они по номерам:

0. STDIN
1. STDOUT
2. STDERR

Перенаправление потоков:

`>` перезаписывает старый или создаёт новый файл<br>
`>>` добавляет в конец файла<br>
`<` передача файла на вход программе слева<br>
`>/dev/null` игнорирование вывода<br>
`&>`отправляет в файл оба потока (STDIN и STDOUT)<br>
`2>file` STDERR перенаправляется в файл<br>
`2>&1` STDERR перенаправляется в STDOUT<br>

Можно отправлять потоки в разные файлы `.prog 1>out.txt 2>err.txt`<br>
Или объединить их в один `.prog >combined_out.txt 2>&1`<br>

### Команды

// TODO<br>
cat<br>
cd<br>
chmod<br>
chown<br>
clear<br>
cp<br>
curl<br>
cut<br>
df<br>
diff<br>
echo<br>
find<br>
grep<br>
head<br>
hexdump<br>
hostname<br>
iconv<br>
jobs<br>
ls<br>
mkdir<br>
mv<br>
objdump<br>
od<br>
pwd<br>
readelf<br>
rm<br>
rmdir<br>
sort<br>
ssh<br>
sudo<br>
sudo apt autoremove<br>
sudo apt get<br>
sudo apt ugrade<br>
sudo apt update<br>
sudo su<br>
tac<br>
tail<br>
tldr<br>
touch<br>
uniq<br>
valgrind<br>
wc<br>
wget<br>
which<br>
whoami<br>
